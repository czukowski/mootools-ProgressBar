(function(a){this.ProgressBar=new Class({Implements:[Events,Options],options:{container:document.body,boxID:"progress-bar-box-id",percentageID:"progress-bar-percentage-id",displayID:"progress-bar-display-id",startPercentage:0,displayText:false,speed:10,step:1,allowMore:false,onComplete:$empty},initialize:function(b){this.setOptions(b);this.options.container=a(this.options.container);this.createElements();},createElements:function(){var c=new Element("div",{id:this.options.boxID});var b=new Element("div",{id:this.options.percentageID,style:"width:0px;"});b.inject(c);c.inject(this.options.container);if(this.options.displayText){var d=new Element("div",{id:this.options.displayID});d.inject(this.options.container);}this.set(this.options.startPercentage);},calculate:function(b){return(a(this.options.boxID).getStyle("width").replace("px","")*(b/100)).toInt();},animate:function(c){var d=false;var b=this;if(!b.options.allowMore&&c>100){c=100;}b.to=c.toInt();a(b.options.percentageID).set("morph",{duration:this.options.speed,link:"cancel",onComplete:function(){b.fireEvent("change",[b.to]);if(c>=100){b.fireEvent("complete",[b.to]);}}}).morph({width:b.calculate(c)});if(b.options.displayText){a(b.options.displayID).set("text",b.to+"%");}},set:function(b){this.animate(b);},step:function(){this.set(this.to+this.options.step);}});})(document.id);